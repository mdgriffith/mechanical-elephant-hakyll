(function(){var t,r,n,o,e,i,s;n={createGrid:function(t,r,n,o){var e,i,s,h,a,u,l,f,c;for(s=-1*n-o,l=[],f=e=0,h=Math.floor(t/n)+3;h>=0?h>=e:e>=h;f=h>=0?++e:--e){for(u=[],c=i=0,a=Math.floor(r/n)+3;a>=0?a>=i:i>=a;c=a>=0?++i:--i)u.push(new Two.Vector(f*n+o*Math.random()+s,c*n+o*Math.random()+s));l.push(u)}return l},transpose:function(t,r){var n,o,e,i,s,h,a,u,l,f,c;for(u=[],n=e=0,l=t.length-1;l>=0?l>=e:e>=l;n=l>=0?++e:--e)u.push([]);for(i=0,s=t.length;s>i;i++)for(f=t[i],o=a=0,h=f.length;h>a;o=++a)c=f[o],u[o].push(c);return u},average:function(t){var r,n,o,e;for(o=[0,0],r=0,n=t.length;n>r;r++)e=t[r],o[0]+=e.x,o[1]+=e.y;return{x:o[0]/3,y:o[1]/3}},toQuadCoords:function(t){var r;return r=[],t.x-1>=0?t.y-1>=0?(r.push([t.x-1,t.y-1]),r.push([t.x,t.y-1]),r.push([t.x-1,t.y]),r.push([t.x,t.y])):(r.push([t.x-1,t.y]),r.push([t.x,t.y])):t.y-1>=0?(r.push([t.x,t.y-1]),r.push([t.x,t.y])):r.push([t.x,t.y]),r},quadToTriangleTopLeft:function(t){return new Two.Polygon([t[0],t[1],t[2]],!0,!1,!1)},quadToTriangleBottomRight:function(t){return new Two.Polygon([t[1],t[2],t[3]],!0,!1,!1)},quadToTriangleTopRight:function(t){return new Two.Polygon([t[0],t[1],t[3]],!0,!1,!1)},quadToTriangleBottomLeft:function(t){return new Two.Polygon([t[0],t[2],t[3]],!0,!1,!1)}},s=function(t,r){var n,o,e,i,s,h,a,u,l,f,c,g,p,d,y,w,v,T;for(s=[],l=0,c=r.length;c>l;l++)o=r[l],v=o.x*two.width,T=o.y*two.height,h=Math.abs(v-t.x)/two.width,a=Math.abs(T-t.y)/two.height,i=Math.sqrt(h*h+a*a),s.push([i,o]);for(w=0,f=0,g=s.length;g>f;f++)e=s[f],w+=e[0];for(y=[0,0,0],d=0,p=s.length;p>d;d++)e=s[d],u=1-e[0]/w,n=e[1].rgb,y[0]=y[0]+u*n[0],y[1]=y[1]+u*n[1],y[2]=y[2]+u*n[2];return"rgb("+parseInt(y[0])+","+parseInt(y[1])+","+parseInt(y[2])+")"},t={mixByVector:function(r,n,o){var e,i,s,h,a,u,l,f,c,g,p,d,y,w,v,T;for(w=0,l=[],f=0,g=n.length;g>f;f++)e=n[f],v=e.x,T=e.y,s=Math.abs(v-r.x),h=Math.abs(T-r.y),i=Math.sqrt(s*s+h*h),u=e.factor(i),0>u&&(u=0),w+=u,l.push({factor:u,color:e.rgb});for(1>w&&(l.push({factor:1-w,color:o}),w=1),y=[0,0,0],c=0,p=l.length;p>c;c++)a=l[c],d=a.factor/w,0!==d&&(y=t.mix(y,a.color,d));return t.vary(y,15),"rgb("+parseInt(y[0])+","+parseInt(y[1])+","+parseInt(y[2])+")"},mix:function(t,r,n){var o;return o=[],o.push(t[0]*(1-n)+r[0]*n),o.push(t[1]*(1-n)+r[1]*n),o.push(t[2]*(1-n)+r[2]*n),o},vary:function(t,r){var n;return n=Math.random()*r,t[0]+=n,t[1]+=n,t[3]+=n}},r=function(){function t(t,r,n){var o,e,i;i=n.rgb,e=n.falloff_radius,o=n.falloff_easing,this.relx=t,this.rely=r,this.x=null,this.y=null,this.rgb=i,this.falloff_radius=e,this.falloff_easing=o}return t.prototype.setXY=function(t,r){return this.x=t,this.y=r},t.prototype.factor=function(t){var r;return r=t/this.falloff_radius,this.falloff_easing?1-this.falloff_easing(r):1-r},t}(),e={linear:function(t){return t},square:function(t){return t*t},cubic:function(t){return t*t*t},flat:function(t){var r;return r=function(r){return r>=t?r-t:0}}},o={circles:function(t,r){var n,o,e,i,s,h;for(i=[],o=0,e=r.length;e>o;o++)s=r[o],i.push(function(){var r,o,e;for(e=[],r=0,o=s.length;o>r;r++)h=s[r],n=t.makeCircle(h.x,h.y,4),e.push(n.fill="#000000");return e}());return i},triangles:function(r,o,e,i){var s,h,a,u,l,f,c,g,p,d,y,w,v,T,x,m,b,M,q,B,V,P,k,I,_,C,R;for(x={},_=u=0,f=o.length;f>u;_=++u)for(B=o[_],R=l=0,c=B.length;c>l;R=++l)for(C=B[R],v=n.toQuadCoords({x:_,y:R}),p=0,g=v.length;g>p;p++)w=v[p],w[0]in x?w[1]in x[w[0]]?x[w[0]][w[1]].push(C):x[w[0]][w[1]]=[C]:(x[w[0]]={},x[w[0]][w[1]]=[C]);for(I=[],V=o.length-1,m=d=0,M=V;M>=0?M>=d:d>=M;m=M>=0?++d:--d){for(B=[],a=o[0].length-1,b=y=0,q=a;q>=0?q>=y:y>=q;b=q>=0?++y:--y)T=x[m][b],4===T.length&&(m>=V/2&&b>=a/2||V/2>m&&a/2>b?(P=n.quadToTriangleTopLeft(T),s=t.mixByVector(n.average(P.vertices),e,i),P.fill=s,P.stroke=s,B.push(P),r.add(P),k=n.quadToTriangleBottomRight(T),h=t.mixByVector(n.average(k.vertices),e,i),k.fill=h,k.stroke=h,B.push(k),r.add(k)):(P=n.quadToTriangleTopRight(T),s=t.mixByVector(n.average(P.vertices),e,i),P.fill=s,P.stroke=s,B.push(P),r.add(P),k=n.quadToTriangleBottomLeft(T),h=t.mixByVector(n.average(k.vertices),e,i),k.fill=h,k.stroke=h,B.push(k),r.add(k)));I.push(B)}return I},waves:function(r,o,e){var i,s,h,a,u,l,f;for(u=[],l=n.transpose(o),s=0,h=l.length;h>s;s++)a=l[s],a.push(new Two.Vector(r.width,r.height+100)),a.push(new Two.Vector(0,r.height+100)),f=new Two.Polygon(a,!1,!0,!1),i=t.mixByVector({x:r.height/2,y:a[0].y},e),f.fill=i,f.stroke=i,r.add(f),u.push(f);return u}},i=function(){function t(t,r,n,o,e){this.resolution=r,this.variance=n,this.colors=o,this.vectors=null,this.triangles=null,this.bgColor=e,this.elem=t,this.two=new Two({type:Two.Types.canvas}).appendTo(t),this.bind(),this.resize=function(){}}return t.prototype.bind=function(){var t;return t=function(t){return function(){return t.draw()}}(this)},t.prototype.onResize=function(t){return this.resize=t.bind(this)},t.prototype.draw=function(){return this.two.clear(),this.two.width=this.elem.offsetWidth,this.two.height=this.elem.offsetHeight,this.resize(),null!==this.vectors&&(this.vectors=null,this.triangles=null),this.vectors=n.createGrid(this.two.width,this.two.height,this.resolution,this.variance),this.triangles=o.triangles(this.two,this.vectors,this.colors,this.bgColor),this.two.update()},t.prototype.animate=function(t,r){var n,o;return o=0,n=this.two.bind("update",function(n){return function(e,i){var s,h,a,u,l,f,c,g,p,d,y,w,v,T;for(o+=i,h=o/r*(Math.PI/2),s=n.vectors.length,g=n.vectors,p=[],w=a=0,u=g.length;u>a;w=++a)d=g[w],y=d.length,p.push(function(){var r,n,o;for(o=[],T=r=0,n=d.length;n>r;T=++r)v=d[T],0!==w&&0!==T&&w!==s-1&&T!==y-1&&(c="prev"in v?v.prev:0,l=t*Math.sin(h+w),f=v.y+l-c,v.prev=l,o.push(v.set(v.x,f)));return o}());return p}}(this)),n.play()},t}(),window.ColorPoint=r,window.Easing=e,window.PolyBackground=i}).call(this);
//# sourceMappingURL=./water.js.map